<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>notengt - 在线云笔记</title>
    <link rel="stylesheet" href="__STATIC__/layui//css/layui.css">
    <link rel="stylesheet" href="__STATIC__/index/css/index.css">
    <link rel="stylesheet" href="__STATIC__/index/css/font-awesome.css">

    <script src="__STATIC__/index/js/index.js"></script>
    <!--    makdown-->

    <link rel="stylesheet" href="__STATIC__/editor/css/editormd.css" />
    <!--     makdown-->

    <!--    ztree-->
    <link rel="stylesheet" href="__STATIC__/ztree/css/demo.css" type="text/css">
    <link rel="stylesheet" href="__STATIC__/ztree/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script type="text/javascript" src="__STATIC__/ztree/js/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="__STATIC__/ztree/js/jquery.ztree.core.js"></script>
    <script src="__STATIC__/ztree/js/jquery-1.10.2.js"></script>
    <script src="__STATIC__/ztree/js/jquery-migrate-1.2.1.js" type="text/javascript"></script>
    <script src="__STATIC__/ztree/js/jquery.ztree.all-3.5.min.js" type="text/javascript"></script>
    <script src="__STATIC__/ztree/js/jquery.ztree.exhide-3.5.min.js" type="text/javascript"></script>
    <script src="__STATIC__/ztree/js/MtrSearchZTree.js" type="text/javascript"></script>
    <!-- 建议不要轻易打开这个文件!!! -->
    <script src="__STATIC__/ztree/js/testData.js" type="text/javascript"></script>
    <!--    ztree-->




    <style>

        .ztree * {font-size: 10pt;font-family:"Microsoft Yahei",Verdana,Simsun,"Segoe UI Web Light","Segoe UI Light","Segoe UI Web Regular","Segoe UI","Segoe UI Symbol","Helvetica Neue",Arial}
        .ztree li ul{ margin:0; padding:0}
        .ztree li {line-height:30px;}
        .ztree li a {width:200px;height:30px;padding-top: 0px;}
        .ztree li a:hover {text-decoration:none; background-color: #E7E7E7;}
        .ztree li a span.button.switch {visibility:hidden}
        .ztree.showIcon li a span.button.switch {visibility:visible}
        .ztree li a.curSelectedNode {background-color:#D4D4D4;border:0;height:30px;}
        .ztree li span {line-height:30px;}
        .ztree li span.button {margin-top: -7px;}
        .ztree li span.button.switch {width: 16px;height: 16px;}

        .ztree li a.level0 span {font-size: 150%;font-weight: bold;}
        .ztree li span.button {background-image:url("__STATIC__/ztree/img/left_menuForOutLook.png"); *background-image:url("__STATIC__/ztree/img/left_menuForOutLook.gif")}
        .ztree li span.button.switch.level0 {width: 20px; height:20px}
        .ztree li span.button.switch.level1 {width: 20px; height:20px}
        .ztree li span.button.noline_open {background-position: 0 0;}
        .ztree li span.button.noline_close {background-position: -18px 0;}
        .ztree li span.button.noline_open.level0 {background-position: 0 -18px;}
        .ztree li span.button.noline_close.level0 {background-position: -18px -18px;}

        /*ztree搜索*/
        #treeDemoKeyword {

        }

        /*header*/
        .layui-layout-admin .layui-header {
            background-color: #cdcfd6;
        }

        /*makrdown css*/
        .editormd {
            border: none;
        }

        .layui-layedit-tool .layui-colorpicker-xs {
            border: 0;
        }

        .layui-layedit-tool .layui-colorpicker-trigger-span i {
            display: none !important;
        }

        /*第二栏文档标题选中背景*/
        .checkd_td{
            background-color: #c9dbe8;
        }



    /*   树右键div */
        .bg{
            width: 100px;
            height: 100px;
            /*border: 1px solid darkgray;*/
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            display: none;
            position: relative;
            left: 0px;
            top: 0px;
            z-index: 9999;
        }
        .bg ul{
            list-style-type: none;
            text-align: center;
            line-height: 50px;
            background-color: #fff;
        }
        .bg li{
            font-size: 14px;
        }
        .bg li:hover{
            background-color: darkgrey;
        }



    </style>



</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo" style="color:#586765; ">notengt 云笔记</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
            <li class="layui-nav-item" ><a href="http://ningguoteng.com" target="_blank" style="color:#586765; ">国腾博客</a></li>
<!--            <li class="layui-nav-item"><a href="">商品管理</a></li>-->
<!--            <li class="layui-nav-item"><a href="">用户</a></li>-->
<!--            <li class="layui-nav-item">-->
<!--                <a href="javascript:;">其它系统</a>-->
<!--                <dl class="layui-nav-child">-->
<!--                    <dd><a href="">邮件管理</a></dd>-->
<!--                    <dd><a href="">消息管理</a></dd>-->
<!--                    <dd><a href="">授权管理</a></dd>-->
<!--                </dl>-->
<!--            </li>-->
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
                    ngt
                </a>
<!--                <dl class="layui-nav-child">-->
<!--                    <dd><a href="">基本资料</a></dd>-->
<!--                    <dd><a href="">安全设置</a></dd>-->
<!--                </dl>-->
            </li>
            <li class="layui-nav-item"><a href="javascript:;" class="logout">退了</a></li>
        </ul>
    </div>

    <div class="layui-side" >
<!--            <div class="layui-row" style="height: 50px">-->
<!--                <div class="layui-col-md6" >-->
<!--                    <div class="grid-demo " style="text-align: center;">新建</div>-->
<!--                </div>-->
<!--                <div class="layui-col-md6 ">-->
<!--                    <div class="grid-demo ">上传</div>-->
<!--                </div>-->
<!--            </div>-->
        <div class="layui-side-scroll" style="width: auto; height: calc(100vh - 100px); border: 2px solid #d3d5dc;">

            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul id="treeDemo" class="ztree"></ul>
        </div>
    </div>

    <div class="layui-body" style="bottom: 0px;">
        <!-- 内容主体区域 -->
        <div >
            <div id="box" class="layui-row">
                <div id="left" class="layui-col-md3">
                    <table class="layui-table">
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th>昵称</th>-->

<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <th>昵称</th>-->

<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                        <tr>-->
<!--                            <td>贤心</td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>许闲心</td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
                    </table>
                </div>
                <div id="line">
                    <a id="line1">
                        <span></span>
                    </a>
                </div>
                <div id="right" class="layui-col-md9">
                    <form action="" id="formContent">
                        <!--隐藏的parent_id  -->
                        <input type="hidden" class="hidden-content-id" name="id"/>
                        <input type="hidden" class="hidden-type-id" name="type_id"/>

                        <input type="text" name="title" id="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input" style="width: calc(100% - 150px);display: inline-block;">

                        <div style="display: inline-block;">
                            <button type="button" class="layui-btn add-content">保存</button>
                            <button type="button" class="layui-btn layui-btn-danger del-content">删除</button>
                        </div>


                        <textarea class="layui-textarea"  id="LAY_demo1" style="display: none">
  请开始你的表演
</textarea>

<!--                        <div id="test-editormd">-->
<!--                            <textarea style="display:none;" name="content" id="content_textarea"></textarea>-->
<!--                        </div>-->
                    </form>

                </div>
                </div>
            </div>

        </div>
    <div class="layui-footer" style="background-color: #fff">
        <!-- 底部固定区域 -->
        © note.ningguoteng.com -notengt云笔记由ningguoteng.com独家支持
    </div>
    </div>

</div>


<!--  树菜单的右键列表-->
<div class="bg">
    <ul>
        <li class="tree-right-content">新建笔记</li>
        <li class="tree-right-type">新建文件夹</li>
        <li class="tree-right-rename">重命名</li>
        <li class="tree-right-top">置顶</li>
        <li class="tree-right-clear">放入回收站</li>
    </ul>
</div>




<script src="__STATIC__/layui/layui.js"></script>

<script src="__STATIC__/index/js/submitAjax.js" type="text/javascript"></script>

<script src="__STATIC__/editor/editormd.min.js"></script>
<script src="__STATIC__/layui/Content/ace/ace.js"></script>

<script>

    //全局获取点击后的树对象
    var global_tree_obj = {};
    var layedit;

    //JavaScript代码区域
    layui.use(['element','layer','layedit','jquery'], function(){
        var element = layui.element;
        var layer = layui.layer;
            layedit = layui.layedit;
            // $=layui.jquery;


        //构建一个默认的编辑器
        layedit.set({
            tool: [
                'html', 'undo', 'redo', 'code', 'strong', 'italic', 'underline', 'del', 'addhr', '|', 'removeformat', 'fontFomatt', 'fontfamily', 'fontSize', 'fontBackColor', 'colorpicker', 'face'
                , '|', 'left', 'center', 'right', '|', 'link', 'unlink', 'images', 'image_alt', 'video', 'attachment', 'anchors'
                , '|'
                , 'table', 'customlink'
            ]
            ,autoSync: true
            ,height: 'calc(100vh - 220px)' //设置编辑器高度
        });
        var index = layedit.build('LAY_demo1');

        //编辑器外部操作
        // var active = {
        //     content: function(){
        //         alert(layedit.getContent(index)); //获取编辑器内容
        //     }
        //     ,text: function(){
        //         alert(layedit.getText(index)); //获取编辑器纯文本内容
        //     }
        //     ,selection: function(){
        //         alert(layedit.getSelection(index));
        //     }
        // };


        //markdown编辑器
       // var testEditor;
       //  $(function() {
       //      testEditor = editormd("test-editormd", {
       //          width   : "100%",
       //          height: "calc(100vh - 100px)",
       //          syncScrolling : "single",
       //          path    : "__STATIC__/editor/lib/",
       //          watch:false
       //      });
       //  });
$(document).ready(function(){


        //添加内容post实现
        function addContent(){
            var formContent_val = $("#formContent").serialize();
            post('/api/updateContent',$.param({'content':layedit.getContent(index)})+'&'+formContent_val,function (data) {
                layer.msg('保存成功')

                if (!$.isEmptyObject(data.data.id)){
                    //addh后的操作
                    $(".hidden-content-id").val(data.data.id);
                    var title = $("#title").val();
                    var  html_ = `<tbody>
                               <tr>
                                <th  class="two_list" data-id="${data.data.id}"  data-type="content">${title}</th>
                              </tr>
                              </tbody>`;

                    $(".layui-table").append(html_);
                }else{
                    $(".checkd_td").text(data.data.title);
                }


            })
        }



        //ctrl+s方法执行保存
        document.addEventListener('keydown', function(e) {
            if (e.keyCode == 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey))      {
                e.preventDefault();
                // alert('ctrl+s保存');
                addContent();
            }

        });



        //监控点击事件
        document.addEventListener('click',function()//左键点击菜单消失
        {
            $(".bg").hide();
        })




        //右键或者点击树更新第二及第三栏数据

        function getTwoandContentList(global_tree_obj){
            //赋值type_id
            $(".hidden-type-id").val(global_tree_obj.id)

            post('/api/getSonTypeAndContentList',{'parent_id':global_tree_obj.id},function (data) {


                $(".layui-table").empty();
                if( !$.isEmptyObject(data.data)){

                    var html_ = ``
                    if (!$.isEmptyObject(data.data.type)){

                        html_ = `<thead>`;
                        $.each(data.data.type,function (index,item) {
                            html_ += `<tr class="two_list" data-id="${item.id}"  data-type="type">
                                <th >${item.title}</th>
                              </tr>`
                        });
                        html_ += `</thead>`;

                    }
                    if (!$.isEmptyObject(data.data.content)){
                        html_ += ` <tbody>`;
                        $.each(data.data.content,function (index,item) {
                            if (index == 0){

                                //显示第一个文档内容
                                getContentList(item.id,'content',true)
                            }

                            html_ += `<tr>
                                <td  class="two_list" data-id="${item.id}"  data-type="content">${item.title}</td>
                              </tr>`
                        });
                        html_ += `</tbody>`;
                    }else{
                        //清空富文本
                        $("#title").val('无标题笔记');
                        layedit.setContent(index,'', false);
                    }

                    $(".layui-table").append(html_);

                    if (!$.isEmptyObject(data.data.content)){
                        //给当前第二栏文档选中状态
                        $("#left tbody tr:first-child td").addClass("checkd_td");
                    }


                }else{
                    //清空content_id
                    $(".hidden-content-id").val("");
                    //清空富文本
                    $("#title").val('无标题笔记');
                    layedit.setContent(index,'', false);
                }


            })

        }





        //树栏目


    var curMenu = null, zTree_Menu = null;


    //树的右键回调方法
    function zTreeOnRightClick(event, treeId, treeNode) {
        //alert(treeNode.id);
        global_tree_obj = treeNode
        //更新数据模仿点击
        getTwoandContentList(global_tree_obj);

        //选中树
        var a_tree = zTree.getNodeByParam("id", global_tree_obj.id);
        zTree.selectNode(a_tree,true);

        //显示右键列表
        $(".bg").show();
        $(".bg").css('left',event.clientX+'px');
        $(".bg").css('top',event.clientY-50+'px');


    };


    //重命名回调
    function zTreeOnRename(event, treeId, treeNode, isCancel) {
        //alert(treeNode.id + ", " + treeNode.name);
        post('/api/updateType',{'id':treeNode.id,'title':treeNode.name},function (data) {
            layer.msg(data.message)
        });


    }

    //拖拽后回调
    function zTreeBeforeDrop(treeId, treeNodes, targetNode, moveType) {
        //return !(targetNode == null || (moveType != "inner" && !targetNode.parentTId));
        if (targetNode == null || (moveType != "inner" && !targetNode.parentTId)){
            layer.msg('禁止成为根节点')
            return false;
        }
        //拖拽的节点
        console.log(treeNodes)
        //目标节点
        //console.log(targetNode)

        post('/api/moveType',{'id':treeNodes[0].id,'parent_id':targetNode.id},function (data) {
            layer.msg(data.message)
            zTree_Menu.refresh();
            //模仿点击当前节点
            getTwoandContentList(treeNodes[0]);


        });



    };



    var setting = {
        view: {
            showLine: false,
            showIcon: false,
            selectedMulti: false,
            dblClickExpand: false,
            addDiyDom: addDiyDom
        },
        edit: {
            enable: true,
            drag: {
                prev: false,
                next: false,
                inner: true,
                isCopy: false,
                isMove: true
            }
        },
        data: {
            simpleData: {
                enable: true
            }
        },
        callback: {
            beforeClick: beforeClick,
            onClick: zTreeOnClick,
            onRightClick: zTreeOnRightClick,
            onRename: zTreeOnRename,
            beforeDrop: zTreeBeforeDrop
        }
    };

    var zNodes =[];

    post('/api/getTypeSonLists',{},function (data) {

        $.each(data.data,function (index,item) {
            item.open = false;
            item.tId = 'tree_'+item.id;
            // item.iconOpen = '__STATIC__/ztree/iconOpen.png';
            // item.iconClose = '__STATIC__/ztree/iconClose.png';
            zNodes.push(item);
        })
    })
    console.log(zNodes);

    // var zNodes =[
    //     { id:1, pId:0, name:"我的文件夹",t:"id=1", open:true},
    //     { id:11, pId:1, name:"收件箱" ,t:"id=11"},
    //     { id:111, pId:11, name:"收件箱1" ,t:"id=111"},
    //
    //     { id:12, pId:1, name:"垃圾邮件",t:"id=12"},
    //     { id:13, pId:1, name:"草稿",t:"id=13"},
    //     { id:14, pId:1, name:"已发送邮件",t:"id=14"},
    //     { id:15, pId:1, name:"已删除邮件",t:"id=15"},
    // ];

    //获取第二栏的文档或者第三栏内容
    function getContentList(id,type){
        if (type == 'content'){

            post('/api/getContent',{'content_id':id},function (data) {
                if (!$.isEmptyObject(data.data)){
                    $(".hidden-content-id").val(data.data.id);
                    $(".hidden-type-id").val(data.data.type_id);


                    $("#title").val(data.data.title);
                    layedit.setContent(index, data.data.content, false);



                }
            });
        }else{
            post('/api/getSonTypeAndContentList',{'parent_id':id},function (data) {


                $(".layui-table").empty();
                if( !$.isEmptyObject(data.data)){

                    var html_ = ``
                    if (!$.isEmptyObject(data.data.type)){

                        html_ = `<thead>`;
                        $.each(data.data.type,function (index,item) {
                            html_ += `<tr>
                            <th  class="two_list" data-id="${item.id}"  data-type="type">${item.title}</th>
                          </tr>`
                        });
                        html_ += `</thead>`;

                    }
                    if (!$.isEmptyObject(data.data.content)){
                        html_ += ` <tbody>`;
                        $.each(data.data.content,function (index,item) {
                            if (index == 0){
                                //显示第一个文档内容
                                getContentList(item.id,'content',true)
                            }

                            html_ += `<tr>
                            <td  class="two_list" data-id="${item.id}"  data-type="content">${item.title}</td>
                          </tr>`
                        });
                        html_ += `</tbody>`;
                    }else{
                        //清空富文本
                        $("#title").val('无标题笔记');
                        layedit.setContent(index,'', false);
                    }

                    $(".layui-table").append(html_);

                    if (!$.isEmptyObject(data.data.content)){
                        //给当前第二栏文档选中状态
                        $("#left tbody tr:first-child td").addClass("checkd_td");
                    }
                }else{
                    //清空富文本
                    $("#title").val('无标题笔记');
                    layedit.setContent(index,'', false);
                }

            })
        }
    };




    //点击树更新第二栏及第三栏
    function zTreeOnClick(event, treeId, treeNode) {
        global_tree_obj = treeNode

        getTwoandContentList(global_tree_obj);

    }


    function addDiyDom(treeId, treeNode) {
        var spaceWidth = 5;
        var switchObj = $("#" + treeNode.tId + "_switch"),
            icoObj = $("#" + treeNode.tId + "_ico");
        switchObj.remove();
        icoObj.before(switchObj);

        if (treeNode.level > 1) {
            var spaceStr = "<span style='display: inline-block;width:" + (spaceWidth * treeNode.level)+ "px'></span>";
            switchObj.before(spaceStr);
        }
    }
    function clickButton(e, treeId, treeNode) {
        if ( $("#styleNodesByCSS").attr('checked') ) return;
        updateNodes(false, treeNode);
        updateNodes(true, treeNode)
    }

    function beforeClick(treeId, treeNode) {
        if (treeNode.level == 0 ) {
            var zTree = $.fn.zTree.getZTreeObj("treeDemo");
            zTree.expandNode(treeNode);
            return false;
        }
        return true;
    }




        var treeObj = $("#treeDemo");
        var zTree = $.fn.zTree.init(treeObj, setting, zNodes);

        zTree_Menu = $.fn.zTree.getZTreeObj("treeDemo");
         //curMenu = zTree_Menu.getNodes()[0].children[0].children[0];
         //zTree_Menu.selectNode(curMenu);
        //
        // for  ( var  i = 0; i < zNodes.length; i++) {  //设置节点展开
        //     zTree_Menu.expandNode(zNodes[i],  false ,  false ,  false );
        // }

        treeObj.hover(function () {
            if (!treeObj.hasClass("showIcon")) {
                treeObj.addClass("showIcon");
            }
        }, function() {
            treeObj.removeClass("showIcon");
        });

        new MtrSearchZTree();


        //第二栏默认加载顶级文件夹
        post('/api/getUserTopTypeList',{},function (data) {
            $(".layui-table").empty();
            var html_ = `<thead>`;
            $.each(data.data,function (index,item) {
                html_ += `<tr>
                        <th class="two_list" data-id="${item.id}"  data-type="type">${item.title}</th>
                      </tr>`
            })
            html_ += `</thead>`;
            $(".layui-table").append(html_);
        })



        /**
         * 点击第二栏获取内容
         * @param id 点击id
         * @param type 类型 content|type
         */

        $(document).on('click',".two_list",function(){
            var id = $(this).attr('data-id')
            var type = $(this).attr('data-type')
            //表单赋值type_id
            $(".hidden-type-id").val(id);
            if(type == 'type'){
                //选中树
                var a_tree = zTree.getNodeByParam("id", id);
                zTree.selectNode(a_tree,true);
            }else{
                $(".two_list").removeClass("checkd_td");
                $(this).addClass("checkd_td");
            }

            getContentList(id,type)
        });



        /**
         * 右键点击新建笔记
         * @param id 点击id
         * @param type 类型 content|type
         */

        $(document).on('click',".tree-right-content",function(){

            //新建笔记
            post('/api/updateContent',{'title':'无标题笔记','type_id':$(".hidden-type-id").val()},function (data) {

                if (!$.isEmptyObject(data.data.id)){

                    $("#title").val(data.data.title);
                    layedit.setContent(index, '', false);

                   $(".two_list").removeClass("checkd_td");
                    var title = data.data.title;
                    var  html_ = `<tbody>
                               <tr>
                                <th  class="two_list checkd_td" data-id="${data.data.id}"  data-type="content">${title}</th>
                              </tr>
                              </tbody>`;

                    $(".layui-table").prepend(html_);
                }

                $(".hidden-content-id").val(data.data.id);

            })


        });
        /**
         * 右键点击新建文件夹
         * @param id 点击id
         * @param type 类型 content|type
         */

        $(document).on('click',".tree-right-type",function(){

            var type_id = $(".hidden-type-id").val();
            //console.log('当前type_id'+type_id)

            post('/api/addType',{'parent_id':type_id,'title':'新文件夹'},function (data) {
                var parent_node = zTree_Menu.getSelectedNodes();
                var newNode = {name:"新文件夹",id:data.data.id,pId:type_id};
                newNodecall = zTree_Menu.addNodes(parent_node[0], newNode);
                //console.log(newNodecall)
                //选中树
                var a_tree = zTree.getNodeByParam("id", data.data.id);
                zTree.selectNode(a_tree,true);

                //编辑新建节点
                $(".hidden-type-id").val(data.data.id);
                var nodes = zTree_Menu.getSelectedNodes();
                zTree_Menu.editName(nodes[0]);

                //模仿点击当前节点
                getTwoandContentList(nodes[0]);
                //console.log('当前type_id'+$(".hidden-type-id").val())
             });

        });

        /**
         * 右键点重命名
         * @param id 点击id
         * @param type 类型 content|type
         */

        $(document).on('click',".tree-right-rename",function(){

            var type_id = $(".hidden-type-id").val();
            //console.log('当前type_id'+type_id)
            var nodes = zTree_Menu.getSelectedNodes();
            zTree_Menu.editName(nodes[0]);
            //console.log(nodes)

        });

        /**
         * 右键放入回收站
         * @param id 点击id
         * @param type 类型 content|type
         */

        $(document).on('click',".tree-right-clear",function(){

            var type_id = $(".hidden-type-id").val();
            console.log('当前type_id'+type_id)
            post('/api/clearType',{'id':type_id},function (data) {
                //所有节点
                var nodes_all = zTree_Menu.getNodes();
                //当前要移动的节点
                var nodes1 = zTree_Menu.getSelectedNodes();

                zTree_Menu.moveNode(nodes_all[1], nodes1[0], "inner");
                layer.msg(data.message)
            });

        });


    /**
     * 右键置顶
     * @param id 点击id
     * @param type 类型 content|type
     */

    $(document).on('click',".tree-right-top",function(){

        var type_id = $(".hidden-type-id").val();
        console.log('当前type_id'+type_id)
        post('/api/topType',{'id':type_id},function (data) {
            layer.msg(data.message)

        });

    });

    /**
     * 保存按钮保存内容
     * @param id 点击id
     * @param type 类型 content|type
     */

    $(document).on('click',".add-content",function(){

        var type_id = $(".hidden-type-id").val();
        console.log('当前type_id'+type_id)
        addContent();

    });

    /**
     * 删除按钮保存内容
     * @param id 点击id
     * @param type 类型 content|type
     */

    $(document).on('click',".del-content",function(){

        var content_id = $(".hidden-content-id").val();
        post('/api/clearContent',{'id':content_id},function (data) {
            layer.msg(data.message)
            $(".hidden-content-id").val("");
            var nodes = zTree_Menu.getSelectedNodes();
            console.log(nodes)
            //模仿点击当前节点
            getTwoandContentList(nodes[0]);
        });


    });






    //退出登录
        $(".logout").click(function(){
            post('/login/logout', {},function (data) {
                window.location.href="/index/index";
            });
        });

    });

});
</SCRIPT>
</body>
</html>